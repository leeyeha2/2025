import streamlit as st

# 페이지 설정 (전체적인 레이아웃을 넓게 사용)
st.set_page_config(layout="centered")

# --- 상담 조언 함수 정의 (코드를 깔끔하게 정리하기 위해 함수로 분리) ---
def get_counseling_message(category):
    if category == '학업':
        return """
        사랑하는 당신, 학업이라는 큰 산 앞에서 고민하고 계시는군요. 때로는 너무나 버겁고, 나만 뒤처지는 것 같은 기분이 들 수도 있을 거예요. 하지만 기억해주세요, 당신은 지금 이 순간에도 충분히 잘 해내고 있고, 꾸준히 나아가고 있답니다.

        **점수나 결과에 너무 얽매이지 마세요.** 중요한 것은 어제보다 조금 더 성장한 오늘, 그리고 그 작은 노력들이 모여 만들어낼 내일이에요. 완벽해야 한다는 부담감에 지쳐있다면, 잠시 쉬어가며 마음의 여유를 찾는 것도 좋습니다.

        스스로에게 '이만하면 잘했어!'라고 따뜻하게 말해주세요. 당신의 노력과 인내는 분명 아름다운 결실을 맺을 거예요. 하룰랄라가 언제나 당신의 길을 진심으로 응원할게요.
        """
    elif category == '진로':
        return """
        소중한 당신, 진로에 대한 고민은 참으로 무겁고 막연하게 느껴질 수 있어요. 어떤 길을 선택해야 할지 몰라 불안하기도 하고, 주위의 기대 때문에 더 혼란스러울 수도 있겠네요. 하지만 이 고민의 시간은 결코 헛되지 않습니다. 이것은 당신이 진정으로 원하는 것이 무엇인지 찾아가는 소중한 과정이랍니다.

        **조급해하지 마세요.** 당장 정답을 찾지 못해도 괜찮아요. 다양한 경험을 통해 당신의 마음이 이끌리는 곳이 어디인지, 무엇을 할 때 가장 빛나는지 탐색해보세요. 인턴십, 동아리 활동, 관심 분야 스터디 등 작은 시도들이 큰 그림을 완성하는 조각이 될 수 있습니다.

        실패를 두려워하지 않는 용기, 그리고 나를 믿는 굳건한 마음만 있다면 분명 당신만의 특별한 길을 찾을 수 있을 거예요. 당신의 빛나는 미래를 하룰랄라가 진심으로 응원합니다.
        """
    elif category == '가족':
        return """
        다정한 당신, 가족과의 관계에서 힘든 마음을 가지고 계시는군요. 가장 가까운 존재이기에 오히려 더 어렵고 상처받을 때도 있다는 것을 알고 있어요. 서로에게 솔직한 마음을 표현하는 것이 쉽지 않을 때도 있고, 때로는 오해가 쌓여 마음의 벽이 생기기도 하죠.

        **가족은 우리 삶의 가장 소중한 울타리이자 근원적인 사랑의 공간이랍니다.** 잠시 시간을 내어 서로의 이야기를 들어주고, 진심으로 이해하려는 노력을 해보는 것은 어떨까요? 작은 진심이 담긴 따뜻한 말 한마디가 얼어붙었던 마음을 녹여줄 수도 있어요.

        당신도 충분히 노력하고 있으니 너무 자책하지 마세요. 당신의 소중한 가족에게 평화와 사랑이 가득하기를 하룰랄라가 마음 다해 기도합니다.
        """
    elif category == '연애':
        return """
        설레는 당신, 연애 때문에 고민하고 계시군요. 사랑은 우리를 행복하게도 하지만, 때로는 큰 아픔과 고민을 안겨주기도 해요. 상대방의 마음을 이해하기 어렵거나, 내 마음을 어떻게 표현해야 할지 몰라 답답할 수도 있겠네요.

        **가장 중요한 것은 바로 '당신 자신'입니다.** 스스로를 사랑하고 소중히 여길 때, 비로소 건강하고 아름다운 관계를 만들 수 있어요. 상대방에게 모든 것을 맞추기보다, 당신의 가치를 잊지 마세요.

        상대방과 솔직하고 열린 마음으로 대화하며 서로의 감정을 나누고, 작은 순간들을 소중히 여겨보세요. 관계는 두 사람이 함께 가꾸어 나가는 정원과 같으니까요. 지금 이 고민의 시간이 더 깊은 사랑으로 가는 밑거름이 될 거예요. 당신의 사랑이 늘 행복하기를 하룰랄라가 빌어줄게요.
        """
    elif category == '직장':
        return """
        성실한 당신, 직장 생활의 어려움 때문에 마음이 지쳐있으시군요. 쉼 없이 돌아가는 업무, 때로는 인간관계에서 오는 스트레스, 그리고 미래에 대한 불안감까지... 이 모든 것을 홀로 감당하기 버거울 때가 있을 거예요. 하지만 당신은 지금까지 정말 잘 버텨왔고, 당신의 노력은 분명 소중한 가치를 지니고 있답니다.

        **잠시 멈춰 서서 자신을 돌보는 시간을 가져보세요.** 스트레스를 해소할 나만의 방법은 무엇인지 찾아보고, 가능하다면 신뢰하는 동료나 선배와 터놓고 이야기해보는 것도 큰 힘이 될 수 있어요. 모든 것을 완벽하게 하려 하지 않아도 괜찮아요.

        당신의 건강과 행복이 가장 중요합니다. 하룰랄라는 당신이 직장에서 더욱 빛날 수 있도록 언제나 응원할게요. 당신의 노력이 헛되지 않을 거예요.
        """
    elif category == '인간관계':
        return """
        섬세한 당신, 인간관계로 인해 고민하고 계시군요. 사람은 사회적 존재이기에 관계는 우리의 삶에서 빼놓을 수 없는 중요한 부분이지만, 때로는 가장 큰 고민거리가 되기도 합니다. 오해와 갈등, 때로는 기대에 미치지 못하는 관계 때문에 마음이 아플 수도 있겠네요.

        **모든 사람과 완벽하게 잘 지낼 수는 없다는 것을 기억해주세요.** 당신의 소중한 에너지를 빼앗아가는 관계보다는, 당신을 진심으로 이해하고 지지해주는 관계에 더 집중하는 것이 중요해요. 스스로를 존중하고 건강한 경계를 설정하는 것이 행복한 관계의 시작이랍니다.

        당신의 마음을 편안하게 해주는 소중한 인연들이 가득하기를 하룰랄라가 진심으로 바랍니다. 괜찮아요, 좋은 관계는 분명히 존재합니다.
        """
    else: # 기타
        return """
        사랑하는 당신, 어떤 종류의 고민이든 홀로 감당하기 힘들 때는 언제든지 하룰랄라를 찾아와주세요. 당신의 마음속 깊은 이야기를 꺼내어 놓는 것만으로도 큰 위로가 될 수 있답니다. 모든 고민에는 해결책이 있거나, 아니면 최소한 그것을 견뎌낼 수 있는 당신의 강인함이 숨어 있어요.

        **당신은 혼자가 아닙니다.** 때로는 전문가의 도움을 받는 것도 아주 현명한 선택입니다. 당신을 아끼고 지지하는 많은 이들이 주변에 있다는 것을 잊지 마세요.

        이 힘든 시간이 당신을 더욱 단단하고 지혜롭게 만들 것이라고 믿어요. 하룰랄라는 언제나 당신의 옆에서 응원의 메시지를 보낼 거예요. 힘내세요, 당신의 내일은 오늘보다 더 밝을 거예요.
        """

# --- 앱의 제목 및 설명 ---
st.title("🌙 마음을 밝히는 빛, 하룰랄라 고민 상담소")
st.markdown("어두운 밤, 마음속 고민으로 잠 못 드는 당신을 위해 하룰랄라가 따뜻한 빛이 되어 드릴게요.")
st.markdown("---") # 시각적인 구분선

# --- 테마 설정 안내 (무드등 분위기 연출을 위해) ---
st.info("💡 **아늑한 '무드등' 분위기를 원하시면,** Streamlit 앱 좌측 상단의 메뉴(☰)를 클릭해 'Settings' > 'Theme'을 'Dark'로 설정해 보세요. 앱이 더욱 아늑하게 변할 거예요. 언제든 다시 변경하실 수 있습니다.")
st.markdown("---")

# --- 고민 카테고리 선택 ---
st.header("1. 어떤 고민이신가요?")
category = st.selectbox(
    "아래 목록에서 당신의 마음에 가장 가까운 고민의 종류를 선택해주세요. 잠시 숨을 고르고 편안하게 선택해보아요.",
    ['고민 종류를 선택해주세요', '학업', '진로', '가족', '연애', '직장', '인간관계', '기타']
)

# 선택된 카테고리에 따라 다음 단계 진행
if category != '고민 종류를 선택해주세요':
    st.markdown("---") # 시각적인 구분선
    st.header(f"2. 당신의 소중한 고민을 들려주세요. ({category})")
    st.write(f"선택하신 **'{category}'**에 대한 솔직하고 구체적인 마음속 이야기를 적어주세요. 하룰랄라는 언제나 당신의 이야기를 경청할 준비가 되어 있습니다.")

    # --- 고민 내용 입력 ---
    user_worry = st.text_area(
        "여기에 당신의 마음을 편안하게 내려놓듯 고민을 자세히 작성해주세요. (최소 20자 권장)",
        height=200, # 텍스트 영역의 높이를 좀 더 늘림
        help="구체적으로 작성할수록 하룰랄라가 더 따뜻하고 적절한 조언을 해드릴 수 있어요. 괜찮아요, 천천히 솔직하게 적어보세요." # 툴팁 도움말
    )

    # --- 상담받기 버튼 ---
    st.markdown("---") # 시각적인 구분선
    col1, col2, col3 = st.columns([1, 1, 1]) # 버튼을 중앙에 배치하기 위해 컬럼 활용
    with col2: # 가운데 컬럼에 버튼 배치
        if st.button("따뜻한 조언 받기"):
            if user_worry and len(user_worry) >= 20: # 최소 글자 수 제한
                st.markdown("---") # 시각적인 구분선
                st.header("3. 하룰랄라의 조언")

                counseling_message = get_counseling_message(category)
                st.info(f"{counseling_message}") # 깔끔한 파란색 박스 안에 조언 표시. 제목은 함수 안에 포함

                st.markdown("---")
                st.markdown("이 조언이 당신의 마음에 작은 위로와 따뜻한 힘이 되기를 진심으로 바랍니다. 괜찮아요, 당신은 충분히 잘 해낼 수 있어요!")
                st.markdown("_언제든지 마음이 힘들 때 다시 찾아와 주세요. 하룰랄라는 늘 당신의 이야기를 기다릴게요._")
            else:
                st.warning("⚠️ 당신의 소중한 고민 내용을 최소 20자 이상 작성해주셔야 하룰랄라가 더 깊이 있는 조언을 해드릴 수 있어요! 다시 한번 확인해주세요.")
else:
    st.info("⬆️ 먼저 고민의 종류를 선택해주세요. 위에서 목록을 눌러 선택하실 수 있습니다. 천천히 골라보세요.")

# --- 앱 하단 푸터 ---
st.markdown("---")
st.markdown("<p style='text-align: center; color: grey;'><sub>이 앱은 사용자에게 따뜻한 위로와 조언을 드리고자 제작되었습니다. 모든 조언은 일반적인 내용을 담고 있으며, 전문적인 상담을 대체할 수 없습니다.</sub></p>", unsafe_allow_html=True)
st.markdown("<p style='text-align: center; color: grey;'><sub>Developed with ❤️ by 하룰랄라</sub></p>", unsafe_allow_html=True)
